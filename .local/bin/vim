#!/bin/zsh

# Wrapper: use nvim if available, otherwise fall back to system vim

if (( $+commands[nvim] )); then
    exec nvim "${@}"
else
    # Remove this script's directory from PATH to avoid infinite loop
    # ${0:A:h} = absolute path (:A) of script, then dirname (:h)
    # ${path:#pattern} removes elements matching pattern from array
    script_dir=${0:A:h}
    path=(${path:#$script_dir})
    vim "${@}"
fi
